@{
    ViewData["Title"] = "Add Employee";
}

<!-- BUTTON TO OPEN MODAL -->

<!-- EMPLOYEE MODAL -->
<div class="modal fade" id="empModal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">

            <!-- HEADER -->
            <div class="modal-header">
                <h5 class="modal-title">Add / Edit Employee</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <!-- FORM -->
            <form asp-action="SaveEmployee" method="post" enctype="multipart/form-data">

                <!-- HIDDEN FIELDS -->
                <input type="hidden" name="Emp_Id" id="Emp_Id" />
                <input type="hidden" name="Emp_Img" id="Emp_Img" />

                <div class="modal-body">

                    <!-- NAME -->
                    <div class="mb-3">
                        <label class="form-label">Employee Full Name</label>
                        <input type="text" class="form-control" name="Name" id="Name" required />
                    </div>

                    <!-- IMAGE -->
                    <div class="mb-3 text-center">
                        <img id="imgPreview"
                             src="~/assets/img/user-placeholder.png"
                             style="width:120px;height:120px;border-radius:50%;object-fit:cover;border:1px solid #ccc" />
                        <input type="file"
                               class="form-control mt-2"
                               name="EmpImage"
                               accept="image/*"
                               onchange="previewImage(this)" />
                    </div>

                    <!-- DEPT / DESIGNATION -->
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label>Department</label>
                            <select class="form-select" name="DepartmentId" id="DepartmentId">
                                @foreach (var d in (List<SelectListItem>)ViewBag.DepartmentList)
                                {
                                    <option value="@d.Value">@d.Text</option>
                                }
                            </select>
                        </div>

                        <div class="col-md-6 mb-3">
                            <label>Designation</label>
                            <select class="form-select" name="DesignationId" id="DesignationId">
                                @foreach (var d in (List<SelectListItem>)ViewBag.DesignationList)
                                {
                                    <option value="@d.Value">@d.Text</option>
                                }
                            </select>
                        </div>
                    </div>

                    <!-- EMAIL / PHONE -->
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label>Email</label>
                            <input type="email" class="form-control" name="EmailId" id="EmailId" />
                        </div>

                        <div class="col-md-6 mb-3">
                            <label>Phone</label>
                            <input type="text" class="form-control" name="PhoneNo" id="PhoneNo" />
                        </div>
                    </div>

                    <!-- DATE / SALARY / SHIFT -->
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label>Joining Date</label>
                            <input type="text" class="form-control" name="JoiningDate" id="JoiningDate" />
                        </div>

                        <div class="col-md-4 mb-3">
                            <label>Salary</label>
                            <input type="number" class="form-control" name="Salary" id="Salary" />
                        </div>

                        <div class="col-md-4 mb-3">
                            <label>Shift</label>
                            <input type="text" class="form-control" name="Shift" id="Shift" />
                        </div>
                    </div>

                    <!-- ADDRESS -->
                    <div class="mb-3">
                        <label>Address</label>
                        <textarea class="form-control" name="Address" id="Address"></textarea>
                    </div>

                    <!-- STATUS -->
                    <div class="mb-3">
                        <label>Status</label>
                        <select class="form-select" name="Status" id="Status">
                            <option value="Active">Active</option>
                            <option value="Inactive">Inactive</option>
                        </select>
                    </div>

                </div>

                <!-- FOOTER -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary">
                        Save
                    </button>
                </div>

            </form>

        </div>
    </div>
</div>

@section Scripts {

    <script>
        function clearForm() {
            Emp_Id.value = "";
            Name.value = "";
            EmailId.value = "";
            PhoneNo.value = "";
            JoiningDate.value = "";
            Salary.value = "";
            Shift.value = "";
            Address.value = "";
            Status.value = "Active";
            Emp_Img.value = "";
            imgPreview.src = "/assets/img/user-placeholder.png";
        }

        function previewImage(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = e => imgPreview.src = e.target.result;
                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>

}
