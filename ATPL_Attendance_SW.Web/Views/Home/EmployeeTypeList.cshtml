<EmployeeTypeVM>
@{
	ViewData["Title"] = "Master Employee Type";
}
	<head>
		<link href="~/assets/css/popup.css" rel="stylesheet" />
	</head>
	<style>
		.grid-scroll {
			max-height: 350px;
			overflow-y: auto;
		}

		label.required::after {
			content: " *";
			color: red;
		}

	</style>
	<!-- PAGE HEADER -->
	<div class="d-flex justify-content-between align-items-center mb-3">
		<h4 class="page-title">Master Employee Type</h4>

		<button class="btn btn-primary"
				data-bs-toggle="modal"
				data-bs-target="#designationModal"
				onclick="clearForm()">
			<i class="ti ti-plus"></i> Add Employee Type
		</button>
	</div>

	<div class="row mb-2">
		<div class="col-md-6">
			<select id="pageSize" class="form-select" style="width:120px">
				<option value="5">Top 5</option>
				<option value="10" selected>Top 10</option>
				<option value="25">Top 25</option>
				<option value="100">Top 100</option>
			</select>
		</div>

		<div class="col-md-6 text-end">
			<input type="text"
				   id="searchBox"
				   class="form-control"
				   placeholder="Search employee type..."
				   style="width:250px; display:inline-block;">
		</div>
	</div>


	<!-- LIST -->
	<div class="card">
		<div class="table-responsive grid-scroll">
			<table class="table table-hover" id="deptTable">
				<thead>
					<tr>
						<th>Sr. No.</th>
						<th>Employee Type</th>
						<th width="120">Action</th>
					</tr>
				</thead>
				<tbody>
					@for (int i = 0; i < Model.Count; i++)
					{
						<tr>
							<td>@(i + 1)</td>
							<td>@Model[i].EmployeeType</td>
							<td>
								<button class="btn btn-sm btn-warning"
										onclick="editDesignation('@Model[i].Id',
																			 '@Model[i].EmployeeType')">
									<i class="ti ti-edit"></i>
								</button>

								<form asp-action="DeleteEmployeeType" method="post" style="display:inline">
									<input type="hidden" name="id" value="@Model[i].Id" />
									<button class="btn btn-sm btn-danger"
											onclick="return confirm('Do you really want to delete this record?')">
										<i class="ti ti-trash"></i>
									</button>
								</form>
							</td>
						</tr>
					}
				</tbody>
			</table>
		</div>
	</div>

	<div class="d-flex justify-content-end mt-2">
		<ul class="pagination" id="pagination"></ul>
	</div>


	<!-- ADD / EDIT MODAL -->
	<div class="modal fade" id="designationModal">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">

				<form asp-action="AddEmployeeType" method="post">
					<div class="modal-header">
						<h5 class="modal-title">Add New Employee Type</h5>
						<button type="button"
								class="btn-close"
								data-bs-dismiss="modal"></button>
					</div>

					<div class="modal-body">
						<input type="hidden" id="Id"
							   name="Id" />

						<label class="form-label required">Employee Type</label>
						<input type="text"
							   class="form-control"
							   name="EmployeeType"
							   id="EmployeeType"
							   required />
					</div>

					<div class="modal-footer">
						<button class="btn btn-secondary"
								data-bs-dismiss="modal">
							Cancel
						</button>
						<button class="btn btn-primary">Save</button>
					</div>
				</form>

			</div>
		</div>
	</div>
	<!-- ================= CENTER POPUP ================= -->
@if (TempData["Msg"] != null)
{
	var type = TempData["Type"] ?? "success"; // success / error
											  	<div class="popup-overlay @type" id="centerPopup">
											  		<div class="popup-box">
											  			<div class="popup-icon @type">
											  				@(type == "success" ? "✓" : "✕")
											  			</div>

				<h4>@(type == "success" ? "Success" : "Failed")</h4>
				<p>@TempData["Msg"]</p>
			</div>
		</div>
}


	<script src="~/assets/js/global.js"></script>
@section Scripts {
		<script>

				  const popup = document.getElementById("centerPopup");
			if (popup) {
				setTimeout(() => {
					popup.style.opacity = "0";
					setTimeout(() => popup.remove(), 300);
				}, 1500);
			}

			function clearForm() {
				document.getElementById("Id").value = "";
				document.getElementById("EmployeeType").value = "";
			}

			function editDesignation(id, name) {
				document.getElementById("Id").value = id;
				document.getElementById("EmployeeType").value = name;
				new bootstrap.Modal(
					document.getElementById('designationModal')
				).show();
			}
		</script>
}
